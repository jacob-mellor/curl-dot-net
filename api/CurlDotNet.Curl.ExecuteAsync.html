<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CurlDotNet.Curl.ExecuteAsync - CurlDotNet Documentation. Pure .NET implementation of curl for C#.">
    <meta name="keywords" content="curl, .NET, C#, HTTP, REST API, NuGet, CurlDotNet">
    <meta name="author" content="Jacob Mellor, IronSoftware">
    <title>CurlDotNet.Curl.ExecuteAsync | CurlDotNet Documentation</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.2.0/github-markdown.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
        }

        /* Beautiful Header */
        .site-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        .site-header h1 {
            font-size: 2.5em;
            margin-bottom: 8px;
        }
        .site-header h1 a {
            color: white;
            text-decoration: none;
        }
        .site-header h1 a:hover {
            text-decoration: underline;
        }
        .site-header .tagline {
            font-size: 1.1em;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        .header-nav {
            margin-top: 15px;
        }
        .header-nav a {
            color: white;
            text-decoration: none;
            margin: 0 12px;
            padding: 8px 16px;
            border-radius: 20px;
            background: rgba(255,255,255,0.15);
            display: inline-block;
            font-size: 0.95em;
            transition: background 0.2s;
        }
        .header-nav a:hover {
            background: rgba(255,255,255,0.3);
        }

        /* Breadcrumbs */
        .breadcrumbs {
            background: #e2e8f0;
            padding: 12px 20px;
            font-size: 0.9em;
        }
        .breadcrumbs-inner {
            max-width: 900px;
            margin: 0 auto;
        }
        .breadcrumbs a {
            color: #667eea;
            text-decoration: none;
        }
        .breadcrumbs a:hover {
            text-decoration: underline;
        }
        .bc-sep {
            color: #718096;
            margin: 0 6px;
        }

        /* Main Content */
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 30px 20px;
        }
        .content-card {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .markdown-body { font-size: 16px; }
        .markdown-body pre {
            background: #f6f8fa;
            padding: 16px;
            overflow: auto;
            border-radius: 6px;
        }
        .markdown-body code {
            background: #f6f8fa;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 0.9em;
        }
        .markdown-body pre code {
            background: none;
            padding: 0;
        }
        .markdown-body a { color: #667eea; }
        .markdown-body h1, .markdown-body h2, .markdown-body h3 {
            margin-top: 24px;
            margin-bottom: 16px;
            border-bottom: 1px solid #e1e4e8;
            padding-bottom: 8px;
        }
        .markdown-body h1:first-child { margin-top: 0; }

        /* Author Box - IN THE ARTICLE for SEO */
        .author-box {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 2px solid #667eea;
            background: #f8f9ff;
            padding: 25px;
            border-radius: 8px;
        }
        .author-box h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        .author-box p {
            margin: 8px 0;
            color: #4a5568;
        }
        .author-box a {
            color: #667eea;
            text-decoration: none;
        }
        .author-box a:hover {
            text-decoration: underline;
        }

        /* Footer - minimal */
        .site-footer {
            background: #2d3748;
            color: white;
            padding: 20px;
            text-align: center;
            margin-top: 40px;
        }
        .site-footer a {
            color: #68d391;
            text-decoration: none;
            margin: 0 10px;
        }
        .site-footer a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <header class="site-header">
        <h1><a href="/">üì¶ CurlDotNet</a></h1>
        <p class="tagline">Pure .NET implementation of curl - Paste any curl command into C#</p>
        <nav class="header-nav">
            <a href="/getting-started/">Get Started</a>
            <a href="/tutorials/">Tutorials</a>
            <a href="/cookbook/">Cookbook</a>
            <a href="/api/">API Reference</a>
            <a href="https://github.com/jacob-mellor/curl-dot-net">GitHub</a>
            <a href="https://www.nuget.org/packages/CurlDotNet/">NuGet</a>
            <a href="https://github.com/jacob-mellor">Author</a>
        </nav>
    </header>

    <nav class="breadcrumbs">
        <div class="breadcrumbs-inner">
            <a href="/">Home</a> <span class="bc-sep">‚Ä∫</span> <a href="/api/">API Reference</a>
        </div>
    </nav>

    <main class="container">
        <article class="content-card markdown-body">
<h4><a href="index.md" title="index">CurlDotNet</a></h4>
<h3><a href="CurlDotNet.md" title="CurlDotNet">CurlDotNet</a>.<a href="CurlDotNet.Curl.md" title="CurlDotNet.Curl">Curl</a></h3>
<h2>Curl.ExecuteAsync Method</h2>
<table>
<thead>
<tr>
<th align="left">Overloads</th>
<th align="left"></th>
</tr>
</thead>
<tbody><tr>
<td align="left"><a href="CurlDotNet.Curl.ExecuteAsync.md#CurlDotNet.Curl.ExecuteAsync(string)" title="CurlDotNet.Curl.ExecuteAsync(string)">ExecuteAsync(string)</a></td>
<td align="left"><b>üéØ THE MAIN METHOD - Executes any curl command and returns the response.</b>  Just paste ANY curl command as a string. It works exactly like running curl from the command line,              but returns the result as a nice C# object you can work with.  <b>Simple Example:</b>`...`  <b>Real-World Example from Stripe Docs:</b>`...`  <b>All HTTP Methods Supported:</b>`...`  <b>Common Options:</b>`...`</td>
</tr>
<tr>
<td align="left"><a href="CurlDotNet.Curl.ExecuteAsync.md#CurlDotNet.Curl.ExecuteAsync(string,CurlDotNet.Core.CurlSettings)" title="CurlDotNet.Curl.ExecuteAsync(string, CurlDotNet.Core.CurlSettings)">ExecuteAsync(string, CurlSettings)</a></td>
<td align="left"><b>Execute with advanced settings - for when you need more control.</b>  Use this overload when you need features beyond what curl command strings provide,              like progress callbacks, custom HTTP handlers, or retry policies.  <b>Example with Progress Reporting:</b>`...`  <b>Example with Custom Retry Policy:</b>`...`</td>
</tr>
<tr>
<td align="left"><a href="CurlDotNet.Curl.ExecuteAsync.md#CurlDotNet.Curl.ExecuteAsync(string,System.Threading.CancellationToken)" title="CurlDotNet.Curl.ExecuteAsync(string, System.Threading.CancellationToken)">ExecuteAsync(string, CancellationToken)</a></td>
<td align="left"><b>Execute a curl command with cancellation support - perfect for long-running operations.</b>  This lets you cancel the HTTP request if it&#39;s taking too long or if the user cancels.              Essential for good user experience in desktop and mobile apps.  <b>Basic Example:</b>`...`  <b>User-Cancellable Download:</b>`...`  <b>Web API with Request Timeout:</b>`...`</td>
</tr>
</tbody></table>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string)'></a></p>
<h2>Curl.ExecuteAsync(string) Method</h2>
<p><b>üéØ THE MAIN METHOD - Executes any curl command and returns the response.</b></p>
<p>Just paste ANY curl command as a string. It works exactly like running curl from the command line,
             but returns the result as a nice C# object you can work with.</p>
<p><b>Simple Example:</b></p>
<pre><code class="language-csharp">// Copy any curl command from documentation and paste it here:
var response = await Curl.Execute(&quot;curl https://api.github.com/users/octocat&quot;);

// Work with the response:
Console.WriteLine($&quot;Status: {response.StatusCode}&quot;);  // 200
Console.WriteLine($&quot;Body: {response.Body}&quot;);          // JSON data
var user = response.ParseJson&lt;GitHubUser&gt;();        // Parse to object
</code></pre>
<p><b>Real-World Example from Stripe Docs:</b></p>
<pre><code class="language-csharp">// Paste the exact command from Stripe&#39;s documentation:
var response = await Curl.Execute(@&quot;
    curl https://api.stripe.com/v1/charges \
      -u sk_test_4eC39HqLyjWDarjtT1zdp7dc: \
      -d amount=2000 \
      -d currency=usd \
      -d source=tok_mastercard \
      -d description=&#39;My First Test Charge&#39;
&quot;);

if (response.IsSuccess)
{
    var charge = response.ParseJson&lt;StripeCharge&gt;();
    Console.WriteLine($&quot;Payment successful! ID: {charge.Id}&quot;);
}
</code></pre>
<p><b>All HTTP Methods Supported:</b></p>
<pre><code class="language-csharp">await Curl.Execute(&quot;curl -X GET https://api.example.com/users&quot;);     // GET (default)
await Curl.Execute(&quot;curl -X POST https://api.example.com/users&quot;);    // POST
await Curl.Execute(&quot;curl -X PUT https://api.example.com/users/123&quot;); // PUT
await Curl.Execute(&quot;curl -X DELETE https://api.example.com/users/123&quot;); // DELETE
await Curl.Execute(&quot;curl -X PATCH https://api.example.com/users/123&quot;); // PATCH
</code></pre>
<p><b>Common Options:</b></p>
<pre><code class="language-csharp">// Headers
await Curl.Execute(&quot;curl -H &#39;Authorization: Bearer token123&#39; https://api.example.com&quot;);

// POST data
await Curl.Execute(&quot;curl -d &#39;{\&quot;name\&quot;:\&quot;John\&quot;}&#39; https://api.example.com&quot;);

// Save to file
await Curl.Execute(&quot;curl -o download.pdf https://example.com/file.pdf&quot;);

// Follow redirects
await Curl.Execute(&quot;curl -L https://short.link/abc&quot;);

// Basic auth
await Curl.Execute(&quot;curl -u username:password https://api.example.com&quot;);

// Timeout
await Curl.Execute(&quot;curl --max-time 30 https://slow-api.example.com&quot;);
</code></pre>
<pre><code class="language-csharp">public static System.Threading.Tasks.Task&lt;CurlDotNet.Core.CurlResult&gt; ExecuteAsync(string command);
</code></pre>
<h4>Parameters</h4>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string).command'></a></p>
<p><code>command</code> <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string" title="System.String">System.String</a></p>
<p>Any valid curl command as a string. You can literally copy and paste from:</p>
<ul>
<li>üìñ API documentation (Stripe, Twilio, GitHub, etc.)</li>
<li>üí¨ Stack Overflow answers</li>
<li>üìù Blog posts and tutorials</li>
<li>üñ•Ô∏è Your terminal history</li>
<li>üîß Postman&#39;s &quot;Code&quot; export feature</li>
<li>üåê Browser DevTools &quot;Copy as cURL&quot;</li>
</ul>
<p>The &quot;curl&quot; prefix is optional - both work:</p>
<pre><code class="language-csharp">await Curl.Execute(&quot;curl https://api.example.com&quot;);  // With &quot;curl&quot;
await Curl.Execute(&quot;https://api.example.com&quot;);       // Without &quot;curl&quot;
</code></pre>
<h4>Returns</h4>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1" title="System.Threading.Tasks.Task`1">System.Threading.Tasks.Task&lt;</a><a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1" title="System.Threading.Tasks.Task`1">&gt;</a>  </p>
<p>A <a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a> object containing everything from the HTTP response:</p>
<ul>
<li><b>StatusCode</b> - HTTP status (200, 404, 500, etc.)</li>
<li><b>Body</b> - Response body as string</li>
<li><b>Headers</b> - All response headers as dictionary</li>
<li><b>IsSuccess</b> - True if status is 200-299</li>
<li><b>ParseJson&lt;T&gt;()</b> - Parse JSON response to your class</li>
<li><b>SaveToFile()</b> - Save response to disk</li>
</ul>
<p>See <a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a> for all available properties and methods.</p>
<h4>Exceptions</h4>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.argumentnullexception" title="System.ArgumentNullException">System.ArgumentNullException</a>  </p>
<p>Thrown when command is null or empty.</p>
<pre><code class="language-csharp">// ‚ùå These will throw:
await Curl.Execute(null);
await Curl.Execute(&quot;&quot;);
await Curl.Execute(&quot;   &quot;);
</code></pre>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/curlparseexception" title="CurlParseException">CurlParseException</a>  </p>
<p>Thrown when the curl command can&#39;t be understood. Usually means typo or unsupported option.</p>
<pre><code class="language-csharp">// ‚ùå This will throw CurlParseException:
await Curl.Execute(&quot;curl --invalid-option https://example.com&quot;);
</code></pre>
<p>Error codes: CURLE_URL_MALFORMAT (3), CURLE_UNSUPPORTED_PROTOCOL (1)</p>
<p>See: <a href="https://curl.se/libcurl/c/libcurl-errors.html" title="https://curl.se/libcurl/c/libcurl-errors.html">curl error codes</a></p>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/curldnsexception" title="CurlDnsException">CurlDnsException</a>  </p>
<p>Thrown when the hostname cannot be resolved (DNS failure).</p>
<pre><code class="language-csharp">try
{
    await Curl.Execute(&quot;curl https://this-domain-does-not-exist.com&quot;);
}
catch (CurlDnsException ex)
{
    Console.WriteLine($&quot;Could not find server: {ex.Hostname}&quot;);
}
</code></pre>
<p>Error code: CURLE_COULDNT_RESOLVE_HOST (6)</p>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/curltimeoutexception" title="CurlTimeoutException">CurlTimeoutException</a>  </p>
<p>Thrown when the operation takes longer than the timeout specified by <a href="CurlDotNet.Curl.md#CurlDotNet.Curl.ExecuteAsync(string).command" title="CurlDotNet.Curl.ExecuteAsync(string).command">command</a> (via <code>--max-time</code>) 
             or <a href="CurlDotNet.Curl.DefaultMaxTimeSeconds.md" title="CurlDotNet.Curl.DefaultMaxTimeSeconds">DefaultMaxTimeSeconds</a>.</p>
<pre><code class="language-csharp">try
{
    await Curl.ExecuteAsync(&quot;curl --max-time 5 https://very-slow-api.com&quot;);
}
catch (CurlTimeoutException ex)
{
    Console.WriteLine($&quot;Timed out after {ex.Timeout} seconds&quot;);
}
</code></pre>
<p>Error code: <code>CURLE_OPERATION_TIMEDOUT</code> (28)</p>
<p>To cancel operations without waiting for timeout, use the <a href="CurlDotNet.Curl.ExecuteAsync.md#CurlDotNet.Curl.ExecuteAsync(string,System.Threading.CancellationToken)" title="CurlDotNet.Curl.ExecuteAsync(string, System.Threading.CancellationToken)">overload with </a>.</p>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/curlsslexception" title="CurlSslException">CurlSslException</a>  </p>
<p>Thrown for SSL/TLS certificate problems. This can occur when certificates are self-signed, expired, 
             or don&#39;t match the domain. Check <a href="https://learn.microsoft.com/en-us/dotnet/api/curlsslexception.certificateerror" title="CurlSslException.CertificateError">CurlSslException.CertificateError</a> for details.</p>
<pre><code class="language-csharp">try
{
    await Curl.ExecuteAsync(&quot;curl https://self-signed-cert.example.com&quot;);
}
catch (CurlSslException ex)
{
    Console.WriteLine($&quot;SSL problem: {ex.Message}&quot;);
    if (ex.CertificateError != null)
        Console.WriteLine($&quot;Certificate error: {ex.CertificateError}&quot;);
    // In development only, you could use: curl -k (insecure)
}
</code></pre>
<p>Error codes: <code>CURLE_SSL_CONNECT_ERROR</code> (35), <code>CURLE_PEER_FAILED_VERIFICATION</code> (60)</p>
<p><b>‚ö†Ô∏è WARNING:</b> Using <code>-k</code> or <code>--insecure</code> disables certificate validation and makes you vulnerable to man-in-the-middle attacks. Only use in development!</p>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/curlexception" title="CurlException">CurlException</a>  </p>
<p>Base exception for all curl-related errors. All specific exceptions inherit from this. 
             See <a href="https://learn.microsoft.com/en-us/dotnet/api/curlexception.errorcode" title="CurlException.ErrorCode">CurlException.ErrorCode</a> for the specific curl error code.</p>
<p>Common error codes:</p>
<table>
<thead>
<tr>
<th>Error Code</th>
</tr>
</thead>
<tbody><tr>
<td>The URL uses an unsupported protocol (not http, https, ftp, or file)</td>
</tr>
<tr>
<td>The URL is malformed (missing protocol, invalid characters, etc.)</td>
</tr>
<tr>
<td>DNS lookup failed - hostname doesn&#39;t exist</td>
</tr>
<tr>
<td>Operation timed out (see <a href="https://learn.microsoft.com/en-us/dotnet/api/curltimeoutexception" title="CurlTimeoutException">CurlTimeoutException</a>)</td>
</tr>
<tr>
<td>SSL certificate verification failed (see <a href="https://learn.microsoft.com/en-us/dotnet/api/curlsslexception" title="CurlSslException">CurlSslException</a>)</td>
</tr>
</tbody></table>
<p>For a complete list of all curl error codes, see <a href="https://curl.se/libcurl/c/libcurl-errors.html" title="https://curl.se/libcurl/c/libcurl-errors.html">curl error codes</a>.</p>
<h3>See Also</h3>
<ul>
<li><a href="CurlDotNet.Curl.ExecuteAsync.md#CurlDotNet.Curl.ExecuteAsync(string,System.Threading.CancellationToken)" title="CurlDotNet.Curl.ExecuteAsync(string, System.Threading.CancellationToken)">Execute with cancellation support</a></li>
<li><a href="https://learn.microsoft.com/en-us/dotnet/api/curldotnet.curl.executeasync#curldotnet-curl-executeasync(system-string%5B%5D)" title="CurlDotNet.Curl.ExecuteAsync(System.String[])">Execute multiple commands in parallel</a></li>
<li><a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">The response object returned containing , , , etc.</a></li>
<li><a href="CurlDotNet.Core.CurlRequestBuilder.md" title="CurlDotNet.Core.CurlRequestBuilder">Fluent API alternative for building requests programmatically</a></li>
<li><a href="CurlDotNet.Curl.DefaultMaxTimeSeconds.md" title="CurlDotNet.Curl.DefaultMaxTimeSeconds">Set a default timeout for all operations</a></li>
<li><a href="CurlDotNet.Curl.DefaultFollowRedirects.md" title="CurlDotNet.Curl.DefaultFollowRedirects">Enable redirect following globally</a></li>
<li><a href="https://curl.se/docs/manpage.html" title="https://curl.se/docs/manpage.html">Complete curl documentation</a></li>
<li><a href="https://curl.se/docs/manpage.html#OPTIONS" title="https://curl.se/docs/manpage.html#OPTIONS">All curl options</a></li>
</ul>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string,CurlDotNet.Core.CurlSettings)'></a></p>
<h2>Curl.ExecuteAsync(string, CurlSettings) Method</h2>
<p><b>Execute with advanced settings - for when you need more control.</b></p>
<p>Use this overload when you need features beyond what curl command strings provide,
             like progress callbacks, custom HTTP handlers, or retry policies.</p>
<p><b>Example with Progress Reporting:</b></p>
<pre><code class="language-csharp">var settings = new CurlSettings
{
    OnProgress = (bytes, total) =&gt;
    {
        var percent = (bytes * 100.0) / total;
        Console.WriteLine($&quot;Downloaded: {percent:F1}%&quot;);
    }
};

await Curl.Execute(&quot;curl -O https://example.com/large-file.zip&quot;, settings);
</code></pre>
<p><b>Example with Custom Retry Policy:</b></p>
<pre><code class="language-csharp">var settings = new CurlSettings
{
    RetryCount = 3,
    RetryDelay = TimeSpan.FromSeconds(2),
    RetryOn = new[] { 500, 502, 503, 504 }  // Retry on server errors
};

await Curl.Execute(&quot;curl https://unstable-api.example.com&quot;, settings);
</code></pre>
<pre><code class="language-csharp">public static System.Threading.Tasks.Task&lt;CurlDotNet.Core.CurlResult&gt; ExecuteAsync(string command, CurlDotNet.Core.CurlSettings settings);
</code></pre>
<h4>Parameters</h4>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string,CurlDotNet.Core.CurlSettings).command'></a></p>
<p><code>command</code> <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string" title="System.String">System.String</a></p>
<p>Any curl command string.</p>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string,CurlDotNet.Core.CurlSettings).settings'></a></p>
<p><code>settings</code> <a href="CurlDotNet.Core.CurlSettings.md" title="CurlDotNet.Core.CurlSettings">CurlSettings</a></p>
<p>Advanced settings including:</p>
<ul>
<li><b>OnProgress</b> - Callback for download/upload progress</li>
<li><b>RetryCount</b> - Number of retry attempts</li>
<li><b>RetryDelay</b> - Delay between retries</li>
<li><b>CustomHttpMessageHandler</b> - Use your own HttpMessageHandler</li>
<li><b>Middleware</b> - Add custom processing pipeline</li>
</ul>
<p>See <a href="CurlDotNet.Core.CurlSettings.md" title="CurlDotNet.Core.CurlSettings">CurlSettings</a> for all options.</p>
<h4>Returns</h4>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1" title="System.Threading.Tasks.Task`1">System.Threading.Tasks.Task&lt;</a><a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1" title="System.Threading.Tasks.Task`1">&gt;</a><br>A <a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a> with the response.</p>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string,System.Threading.CancellationToken)'></a></p>
<h2>Curl.ExecuteAsync(string, CancellationToken) Method</h2>
<p><b>Execute a curl command with cancellation support - perfect for long-running operations.</b></p>
<p>This lets you cancel the HTTP request if it&#39;s taking too long or if the user cancels.
             Essential for good user experience in desktop and mobile apps.</p>
<p><b>Basic Example:</b></p>
<pre><code class="language-csharp">// Create a cancellation token that times out after 30 seconds
using var cts = new CancellationTokenSource(TimeSpan.FromSeconds(30));

try
{
    var response = await Curl.Execute(
        &quot;curl https://slow-api.example.com/large-file&quot;,
        cts.Token
    );
    Console.WriteLine(&quot;Download complete!&quot;);
}
catch (OperationCanceledException)
{
    Console.WriteLine(&quot;Download cancelled or timed out after 30 seconds&quot;);
}
</code></pre>
<p><b>User-Cancellable Download:</b></p>
<pre><code class="language-csharp">private CancellationTokenSource _downloadCts;

// Start download
async Task StartDownload()
{
    _downloadCts = new CancellationTokenSource();

    try
    {
        var result = await Curl.Execute(
            &quot;curl -o large-file.zip https://example.com/huge-file.zip&quot;,
            _downloadCts.Token
        );
        MessageBox.Show(&quot;Download complete!&quot;);
    }
    catch (OperationCanceledException)
    {
        MessageBox.Show(&quot;Download cancelled by user&quot;);
    }
}

// Cancel button click
void CancelButton_Click()
{
    _downloadCts?.Cancel();  // This stops the download
}
</code></pre>
<p><b>Web API with Request Timeout:</b></p>
<pre><code class="language-csharp">[HttpGet]
public async Task&lt;IActionResult&gt; ProxyRequest(CancellationToken cancellationToken)
{
    // ASP.NET Core passes cancellation token that triggers when:
    // - Client disconnects
    // - Request timeout is reached
    // - Server is shutting down

    var result = await Curl.Execute(
        &quot;curl https://external-api.example.com/data&quot;,
        cancellationToken  // Pass it through!
    );

    return Ok(result.Body);
}
</code></pre>
<pre><code class="language-csharp">public static System.Threading.Tasks.Task&lt;CurlDotNet.Core.CurlResult&gt; ExecuteAsync(string command, System.Threading.CancellationToken cancellationToken);
</code></pre>
<h4>Parameters</h4>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string,System.Threading.CancellationToken).command'></a></p>
<p><code>command</code> <a href="https://learn.microsoft.com/en-us/dotnet/api/system.string" title="System.String">System.String</a></p>
<p>Any curl command string. See <a href="CurlDotNet.Curl.Execute.md#CurlDotNet.Curl.Execute(string)" title="CurlDotNet.Curl.Execute(string)">Execute(string)</a> for full documentation.</p>
<p><a name='CurlDotNet.Curl.ExecuteAsync(string,System.Threading.CancellationToken).cancellationToken'></a></p>
<p><code>cancellationToken</code> <a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.cancellationtoken" title="System.Threading.CancellationToken">System.Threading.CancellationToken</a></p>
<p>Token to cancel the operation. Get this from:</p>
<ul>
<li>‚è±Ô∏è <code>new CancellationTokenSource(TimeSpan.FromSeconds(30))</code> - Timeout</li>
<li>üîò <code>CancellationTokenSource</code> linked to Cancel button - User cancellation</li>
<li>üåê ASP.NET Core action parameter - Web request cancellation</li>
<li>üîó <code>CancellationTokenSource.CreateLinkedTokenSource()</code> - Multiple conditions</li>
</ul>
<p>Learn more: <a href="https://docs.microsoft.com/en-us/dotnet/standard/threading/cancellation-in-managed-threads" title="https://docs.microsoft.com/en-us/dotnet/standard/threading/cancellation-in-managed-threads">Cancellation in .NET</a></p>
<h4>Returns</h4>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1" title="System.Threading.Tasks.Task`1">System.Threading.Tasks.Task&lt;</a><a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a><a href="https://learn.microsoft.com/en-us/dotnet/api/system.threading.tasks.task-1" title="System.Threading.Tasks.Task`1">&gt;</a><br>Same as <a href="CurlDotNet.Curl.Execute.md#CurlDotNet.Curl.Execute(string)" title="CurlDotNet.Curl.Execute(string)">Execute(string)</a> - a <a href="CurlDotNet.Core.CurlResult.md" title="CurlDotNet.Core.CurlResult">CurlResult</a> with the response.</p>
<h4>Exceptions</h4>
<p><a href="https://learn.microsoft.com/en-us/dotnet/api/system.operationcanceledexception" title="System.OperationCanceledException">System.OperationCanceledException</a>  </p>
<p>Thrown when the operation is cancelled via the token.</p>
<pre><code class="language-csharp">try
{
    await Curl.Execute(&quot;curl https://api.example.com&quot;, cancelToken);
}
catch (OperationCanceledException)
{
    // Handle cancellation gracefully
    Console.WriteLine(&quot;Request was cancelled&quot;);
}
</code></pre>
<h3>Remarks</h3>
<p><b>Best Practices:</b></p>
<ol>
<li>Always dispose CancellationTokenSource when done: <code>using var cts = new...</code></li>
<li>Check <code>token.IsCancellationRequested</code> before starting expensive operations</li>
<li>Pass tokens through your entire async call chain</li>
<li>Combine multiple tokens with CreateLinkedTokenSource for complex scenarios</li>
</ol>



            <div class="author-box">
                <h4>About This Documentation</h4>
                <p>üíé <strong>Sponsored by <a href="https://ironsoftware.com">IronSoftware</a></strong> - Enterprise .NET components trusted by thousands of developers worldwide.</p>
                <p>‚úçÔ∏è <strong>Written by <a href="https://ironsoftware.com/about-us/authors/jacobmellor/">Jacob Mellor</a></strong>, CTO at IronSoftware.</p>
                <p>üì¶ <strong>Get CurlDotNet:</strong> <a href="https://www.nuget.org/packages/CurlDotNet/">NuGet Package</a> | <a href="https://github.com/jacob-mellor/curl-dot-net">GitHub Repository</a></p>
            </div>
        </article>
    </main>

    <footer class="site-footer">
        <a href="/">Home</a>
        <a href="https://github.com/jacob-mellor/curl-dot-net">GitHub</a>
        <a href="https://www.nuget.org/packages/CurlDotNet/">NuGet</a>
        <a href="https://ironsoftware.com">IronSoftware</a>
    </footer>
</body>
</html>